{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "type": "object",
  "properties": {
    "Projects": {
      "type": "array",
      "items": [
        {
          "type": "object",
          "properties": {
            "Id": {"type": "string"},
            "Path": {
              "type": "string",
              "format": "regex",
              "pattern": ".json$"
            },
            "BuildingBlocks": {
              "type": "array",
              "items": [
                {
                  "type": "object",
                  "properties": {
                    "Type": {
                      "type": "string",
                      "enum": ["Individual", "Population", "Compound", "Administration Protocol", "Event", "Formulation"]
                    },
                    "Name": {"type": "string"},
                    "Project": {"type": "string"}
                  },
                  "required": ["Type", "Name", "Project"]
                }
              ]
            },
            "SimulationParameters": {
              "type": "array",
              "items": [
                {
                  "type": "object",
                  "properties": {
                    "Simulation": {"type": "string"},
                    "Path": {"type": "string"},
                    "SourceProject": {"type": "string"},
                    "SourceSimulation": {"type": "string"}
                  },
                  "required": ["Simulation", "Path", "SourceProject", "SourceSimulation"]
                }
              ]
            }
          },
          "required": ["Id", "Path"]
        }
      ]
    },
    "ObservedDataSets": {
      "type": "array",
      "items": [
        {
          "type": "object",
          "properties": {
            "Id": {"type": "string"},
            "Path": {
              "type": "string",
              "format": "regex",
              "pattern": ".csv$"
            },
            "Type": {
              "type": "string",
              "enum": ["DDIRatio", "PKRatio", "TimeProfile"]
            }
          },
          "required": ["Id", "Path", "Type"]
        }
      ]
    },
    "Plots": {
      "type": "object",
      "properties": {
        "PlotSettings": {
          "type": "object",
          "properties": {
            "ChartWidth": {"type": "integer"},
            "ChartHeight": {"type": "integer"},
            "Fonts": {
              "type": "object",
              "properties": {
                "AxisSize": {
                  "type": "integer",
                  "minimum": 8,
                  "maximum": 60
                },
                "LegendSize": {
                  "type": "integer",
                  "minimum": 8,
                  "maximum": 60
                },
                "OriginSize": {
                  "type": "integer",
                  "minimum": 8,
                  "maximum": 60
                },
                "FontFamilyName": {
                  "type": "string",
                  "enum": ["Arial", "Tahoma", "Times New Roman", "Microsoft Sans Serif"]
                },
                "WatermarkSize": {
                  "type": "integer",
                  "minimum": 8,
                  "maximum": 60
                }
              },
              "required": ["AxisSize", "LegendSize", "OriginSize", "FontFamilyName", "WatermarkSize"]
            }
          },
          "required": ["ChartWidth", "ChartHeight", "Fonts"]
        },
        "AllPlots": {
          "type": "array",
          "items": [
            {
              "type": "object",
              "properties": {
                "SectionId": {"type": "integer"},
                "Project": {"type": "string"},
                "Simulation": {"type": "string"}
              },
              "required": ["SectionId", "Project", "Simulation"]
            }
          ]
        },
        "GOFMerged": {
          "type": "array",
          "items": [
            {
              "type": "object",
              "properties": {
                "SectionId": {"type": "integer"},
                "Name": {"type": "string"},
                "PlotType": {
                  "type": "string",
                  "enum": ["predictedVsObserved", "residualsOverTime", "predictedVsObserved|residualsOverTime"]
                },
                "Group": {
                  "type": "array",
                  "items": [
                    {
                      "type": "object",
                      "properties": {
                        "Name": {"type": "string"},
                        "Symbol": {"type": "integer"},
                        "Simulation": {
                          "type": "array",
                          "items": [
                            {
                              "type": "object",
                              "properties": {
                                "Project": {"type": "string"},
                                "Simulation": {"type": "string"},
                                "Output": {"type": "string"},
                                "ObservedData": {"type": "string"},
                                "Color": {
                                  "type": "string",
                                  "description": "RGB color",
                                  "format":"regex",
                                  "pattern": "^#([a-fA-F0-9]{6})$",
                                  "example": "#aa33cc"
                                }
                              },
                              "required": ["Project", "Simulation", "Output", "ObservedData", "Color"]
                            }
                          ]
                        }
                      },
                      "required": ["Name", "Symbol", "Simulation"]
                    }
                  ]
                }
              },
              "required": ["SectionId", "Name", "PlotType", "Group"]
            }
          ]
        },
        "ComparisonCTProfiles": {
          "type": "array",
          "items": [
            {
              "type": "object",
              "properties": {
                "SectionId": {"type": "integer"},
                "Caption": {"type": "string"},
                "SimulationDuration": {
                  "type": "number",
                  "minimum": 0,
                  "exclusiveMinimum": true
                },
                "TimeUnit": {
                  "type": "string",
                  "enum": ["s", "min", "h", "day(s)", "week(s)", "month(s)", "year(s)"]
                },
                "CTProfile": {
                  "type": "array",
                  "items": [
                    {
                      "type": "object",
                      "properties": {
                        "Project": {"type": "string"},
                        "Simulation": {"type": "string"},
                        "Output": {"type": "string"},
                        "ObservedData": {"type": "string"},
                        "StartTime": {"type": "number"},
                        "TimeUnit": {
                          "type": "string",
                          "enum": ["s", "min", "h", "day(s)", "week(s)", "month(s)", "year(s)"]
                        }
                      },
                      "required": ["Project", "Simulation", "Output", "ObservedData", "StartTime", "TimeUnit"]
                    }
                  ]
                }
              },
              "required": ["SectionId", "Caption", "SimulationDuration", "TimeUnit", "CTProfile"]
            }
          ]
        },
        "DDIRatioPlots": {
          "type": "array",
          "items": [
            {
              "type": "object",
              "properties": {
                "SectionId": {"type": "integer"},
                "Caption": {"type": "string"},
                "PKparameter": {
                  "type": "string",
                  "enum": ["AUC", "CMAX", "AUC|CMAX"]
                },
                "PlotType": {
                  "type": "string",
                  "enum": ["predictedVsObserved", "residualsVsObserved", "predictedVsObserved|residualsVsObserved"]
                },
                "DDIRatioGroup": {
                  "type": "array",
                  "items": [
                    {
                      "type": "object",
                      "properties": {
                        "Caption": {"type": "string"},
                        "Color": {
                          "type": "string",
                          "description": "RGB color",
                          "format":"regex",
                          "pattern": "^#([a-fA-F0-9]{6})$",
                          "example": "#aa33cc"
                        },
                        "DDIRatio": {
                          "type": "object",
                          "properties": {
                            "Output": {"type": "string"},
                            "ObservedData": {"type": "string"},
                            "ObservedDataId": {"type": "string"},
                            "Simulation_control": {
                              "type": "object",
                              "properties": {
                                "Project": {"type": "string"},
                                "Simulation": {"type": "string"},
                                "StartTime": {"type": "number"},
                                "EndTime": {"type": "number"},
                                "TimeUnit": {
                                  "type": "string",
                                  "enum": ["s", "min", "h", "day(s)", "week(s)", "month(s)", "year(s)"]
                                }
                              },
                              "required": ["Project", "Simulation", "StartTime", "EndTime", "TimeUnit"]
                            },
                            "Simulation_DDI": {
                              "type": "object",
                              "properties": {
                                "Project": {"type": "string"},
                                "Simulation": {"type": "string"},
                                "StartTime": {"type": "number"},
                                "EndTime": {"type": "number"},
                                "TimeUnit": {
                                  "type": "string",
                                  "enum": ["s", "min", "h", "day(s)", "week(s)", "month(s)", "year(s)"]
                                }
                              },
                              "required": ["Project", "Simulation", "StartTime", "EndTime", "TimeUnit"]
                            }
                          },
                          "required": ["Output", "ObservedData", "ObservedDataId", "Simulation_control", "Simulation_DDI" ]
                        }
                      },
                      "required": ["Caption", "Color", "DDIRatio"]
                    }
                  ]
                }
              },
              "required": ["SectionId", "Caption", "PKparameter", "PlotType", "DDIRatioGroup"]
            }
          ]
        }
      },
      "required": ["PlotSettings"]
    },
    "Sections": {
      "type": "array",
      "items": [
        {
          "type": "object",
          "properties": {
            "Id": {"type": "integer"},
            "Title": {"type": "string"},
            "Content": {"type": "string"}
          },
          "required": ["Id", "Title", "Content"]
        }
      ]
    }
  },
  "required": ["Projects", "ObservedDataSets", "Plots", "Sections"]
}
